{"ast":null,"code":"import React from'react';import ReactDOM from'react-dom/client';import{useState,useRef,useEffect}from\"react\";import axios from\"axios\";import'./ChatContent';import ChatContent from'./ChatContent';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Chat(){var[chatContent,setChatContent]=useState([{\"type\":0,\"content\":\"Xin Chao\"}]);var[inputValue,SetInputValue]=useState(\"\");const chatRef=useRef(null);useEffect(()=>{var _chatRef$current;// Scroll to the bottom whenever messages change\n(_chatRef$current=chatRef.current)===null||_chatRef$current===void 0?void 0:_chatRef$current.scrollIntoView({behavior:\"smooth\"});},[chatContent]);var handleChange=function(e){SetInputValue(e.target.value);};var sendMessage=function(){};var getAnswer=async function(){var botContent={\"type\":0,\"content\":\"Thank you\"};var data=[{\"sessionId\":\"b9e4bc69a0694a15b110cd7ed1e8303b\",\"action\":\"sendMessage\",\"chatInput\":inputValue}];SetInputValue(\"\");try{var result=await fetch(\"https://103.27.61.96:8443/webhook/62190750-2529-43e0-ab65-30214b0039a2\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",// \"Authorization\": \"Basic \" + btoa(\"ngonc:ngonc\"),\n\"test\":\"123\"},body:JSON.stringify(data)}).then(response=>{return response.text();}).then(data=>{return data;}).catch(error=>console.error(\"Error fetching data:\",error));}catch(error){console.error(\"Error:\",error);}var botContent={\"type\":0,\"content\":result};return botContent;};var generateMessage=async function(){var userContent={\"type\":1,\"content\":inputValue};setChatContent([...chatContent,userContent,await getAnswer()]);};return/*#__PURE__*/_jsxs(\"div\",{class:\"chat\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"chat-header clearfix\",children:/*#__PURE__*/_jsx(\"div\",{class:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"col-lg-6\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"javascript:void(0);\",\"data-toggle\":\"modal\",\"data-target\":\"#view_info\",children:/*#__PURE__*/_jsx(\"img\",{src:\"images/ai_agent.avif\",alt:\"avatar\"})}),/*#__PURE__*/_jsxs(\"div\",{class:\"chat-about\",children:[/*#__PURE__*/_jsx(\"h6\",{class:\"m-b-0\",children:\"AI Agent\"}),/*#__PURE__*/_jsx(\"small\",{children:\"Last seen: Online\"})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{class:\"chat-history\",id:\"chat-context\",children:[/*#__PURE__*/_jsx(ChatContent,{message:chatContent}),/*#__PURE__*/_jsx(\"div\",{ref:chatRef})]}),/*#__PURE__*/_jsx(\"div\",{class:\"chat-message clearfix\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"input-group mb-0\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"input-group-prepend\",children:/*#__PURE__*/_jsx(\"span\",{class:\"input-group-text\",onClick:generateMessage,children:/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-send\"})})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",class:\"form-control\",placeholder:\"Enter text here...\",value:inputValue,onChange:handleChange})]})})]});}export default Chat;","map":{"version":3,"names":["React","ReactDOM","useState","useRef","useEffect","axios","ChatContent","jsx","_jsx","jsxs","_jsxs","Chat","chatContent","setChatContent","inputValue","SetInputValue","chatRef","_chatRef$current","current","scrollIntoView","behavior","handleChange","e","target","value","sendMessage","getAnswer","botContent","data","result","fetch","method","headers","body","JSON","stringify","then","response","text","catch","error","console","generateMessage","userContent","class","children","href","src","alt","id","message","ref","onClick","type","placeholder","onChange"],"sources":["N:/Documents/FreeJob/AIAgent/src/Chat.js"],"sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport './ChatContent'\r\nimport ChatContent from './ChatContent';\r\n\r\nfunction Chat() {\r\n\r\n    var [chatContent, setChatContent] = useState(\r\n        [\r\n            {\r\n                \"type\": 0,\r\n                \"content\": \"Xin Chao\"\r\n            }\r\n        ]\r\n    );\r\n\r\n    var [inputValue, SetInputValue] = useState(\"\");\r\n\r\n    const chatRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        // Scroll to the bottom whenever messages change\r\n        chatRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n    }, [chatContent]);\r\n\r\n    var handleChange = function (e) {\r\n        SetInputValue(e.target.value);\r\n    }\r\n\r\n    var sendMessage = function () {\r\n\r\n    }\r\n\r\n    var getAnswer = async function () {\r\n        var botContent = {\r\n            \"type\": 0,\r\n            \"content\": \"Thank you\"\r\n        }\r\n\r\n        var data = [\r\n            {\r\n                \"sessionId\": \"b9e4bc69a0694a15b110cd7ed1e8303b\",\r\n                \"action\": \"sendMessage\",\r\n                \"chatInput\": inputValue\r\n            }\r\n        ];\r\n        SetInputValue(\"\");\r\n        try {\r\n            var result = await fetch(\"https://103.27.61.96:8443/webhook/62190750-2529-43e0-ab65-30214b0039a2\", {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    // \"Authorization\": \"Basic \" + btoa(\"ngonc:ngonc\"),\r\n                    \"test\": \"123\"\r\n                },\r\n                body: JSON.stringify(data),\r\n            }).then(response => {\r\n                return response.text();\r\n            })\r\n                .then(data => {\r\n                    return data;\r\n                })\r\n                .catch(error => console.error(\"Error fetching data:\", error));\r\n        } catch (error) {\r\n            console.error(\"Error:\", error);\r\n        }\r\n        var botContent = {\r\n            \"type\": 0,\r\n            \"content\": result\r\n        }\r\n        return botContent;\r\n    }\r\n\r\n    var generateMessage = async function () {\r\n        var userContent = {\r\n            \"type\": 1,\r\n            \"content\": inputValue\r\n        }\r\n        setChatContent([...chatContent, userContent, await getAnswer()]);\r\n    }\r\n    return (\r\n        <div class=\"chat\">\r\n            <div class=\"chat-header clearfix\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-lg-6\">\r\n                        <a href=\"javascript:void(0);\" data-toggle=\"modal\" data-target=\"#view_info\">\r\n                            <img src=\"images/ai_agent.avif\" alt=\"avatar\" />\r\n                        </a>\r\n                        <div class=\"chat-about\">\r\n                            <h6 class=\"m-b-0\">AI Agent</h6>\r\n                            <small>Last seen: Online</small>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"chat-history\" id=\"chat-context\">\r\n                <ChatContent message={chatContent} />\r\n                <div ref={chatRef} />\r\n            </div>\r\n            <div class=\"chat-message clearfix\">\r\n                <div class=\"input-group mb-0\">\r\n                    <div class=\"input-group-prepend\">\r\n                        <span class=\"input-group-text\" onClick={generateMessage}><i class=\"fa fa-send\"></i></span>\r\n                    </div>\r\n                    <input type=\"text\" class=\"form-control\" placeholder=\"Enter text here...\" value={inputValue} onChange={handleChange} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Chat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}